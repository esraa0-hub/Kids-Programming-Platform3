<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ - ÙƒÙˆØ¯ ÙƒÙŠØ¯Ø²</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@700;900&family=Source+Code+Pro:wght@300;400&display=swap" rel="stylesheet">
        <style>
            :root {
                --primary: #4361ee;
                --primary-light: #4cc9f0;
                --accent: #f72585;
                --yellow: #ffd166;
                --white: #ffffff;
                --dark: #2b2d42;
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-15px); }
            }
            
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }
            
            body {
                font-family: 'Tajawal', sans-serif;
                margin: 0;
                padding: 0;
                background: linear-gradient(135deg, #83d9f3, #4cc9f0);
                color: var(--dark);
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                position: relative;
                overflow: hidden;
            }
            
            .code-bg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
                z-index: -1;
                opacity: 0.25;
            }
            
            .code-snippet {
                position: absolute;
                font-family: 'Source Code Pro', monospace;
                color: rgba(255,255,255,0.8);
                white-space: pre;
                pointer-events: none;
                font-weight: 300;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            }
            
            .bracket {
                position: absolute;
                font-family: 'Source Code Pro', monospace;
                color: rgba(255,255,255,0.9);
                font-size: 3rem;
                pointer-events: none;
                font-weight: 400;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            }
            
            .lang-name {
                position: absolute;
                font-family: 'Source Code Pro', monospace;
                color: rgba(255,255,255,0.7);
                font-size: 1.5rem;
                pointer-events: none;
                font-weight: 400;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            }
            
            .floating-icon {
                position: absolute;
                font-size: 2rem;
                opacity: 0.7;
                animation: float 6s infinite ease-in-out;
                z-index: -1;
            }
            
            #signup-page {
                width: 100%;
                max-width: 500px;
                padding: 40px;
                background: rgba(255, 255, 255, 0.9);
                border-radius: 20px;
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
                text-align: center;
                position: relative;
                z-index: 1;
                margin: 20px;
            }
            
            #signup-page h3 {
                font-size: 2rem;
                color: var(--primary);
                margin-bottom: 30px;
                font-weight: 900;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            }
            
            #signup-form {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            
            .input-group {
                position: relative;
                width: 90%;
            }
            
            #signup-form input {
                width: 100%;
                padding: 15px 20px;
                border: 2px solid #e0e0e0;
                border-radius: 50px;
                font-size: 1rem;
                font-family: 'Tajawal', sans-serif;
                transition: all 0.3s;
                background: rgba(255, 255, 255, 0.8);
            }
            
            #signup-form input:focus {
                border-color: var(--primary);
                outline: none;
                box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            }
            
            #togglePassword {
                position: absolute;
                left: 15px;
                top: 0%;
                transform: translateY(-15%);
                background: none;
                border: none;
                cursor: pointer;
                color: var(--primary);
                font-size: 1.2rem;
            }
        
            
            #signup-form button {
                background: var(--primary);
                color: white;
                border: none;
                padding: 15px;
                border-radius: 50px;
                font-size: 1.1rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s;
                margin-top: 10px;
                font-family: 'Tajawal', sans-serif;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            }
            
            #signup-form button:hover {
                background: #3a56d4;
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            }
            
            .verification-section {
                display: none;
                margin-top: 20px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.8);
                border-radius: 15px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            }
            
            .verification-section p {
                color: var(--dark);
                margin-bottom: 15px;
            }
            
            #resend-verification {
                background: #4cc9f0;
                background: var(--accent);
                width: 100%;
                height : 30px;

            }
            
            #resend-verification:hover {
                background: #4CAF50;
            }
            
            #email-verified-message {
                color: #4CAF50;
                font-weight: bold;
                display: none;
                animation: fadeIn 0.5s;
                margin-top: 15px;
            }
            
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @media (max-width: 768px) {
                #signup-page {
                    padding: 30px 20px;
                    margin: 15px;
                }
                
                #signup-page h3 {
                    font-size: 1.5rem;
                }
                
                #signup-form input {
                    padding: 12px 15px;
                }
            }
        </style>
    </head>
    <body>
        <div class="code-bg" id="codeBackground"></div>
        
        <!-- Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© -->
        <div class="floating-icon" style="top:20%;left:10%;">ğŸ’»</div>
        <div class="floating-icon" style="top:60%;left:15%;">ğŸ‘¾</div>
        <div class="floating-icon" style="top:30%;right:10%;">ğŸ§©</div>
        <div class="floating-icon" style="top:70%;right:15%;">ğŸ®</div>
        
        <div id="signup-page">
            <h3>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
            <form id="signup-form">
                <div class="input-group">
                    <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù…" required>
                </div>
                
                <div class="input-group">
                    <input type="number" id="age" placeholder="Ø§Ù„Ø¹Ù…Ø±" min="1" required>
                </div>
                
                <div class="input-group">
                    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                </div>
                
                <div class="input-group">
                    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                    <button type="button" id="togglePassword">
                        <i class="far fa-eye"></i>
                    </button>
                </div>
                
                <button type="submit">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
            </form>
            
            <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù‚Ù‚ -->
            <div class="verification-section" id="verification-section">
              
                <button id="resend-verification"> </button>
                <p id="email-verified-message">âœ“ ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­!</p>
            </div>
        </div>

        <script>
            // Ø¥Ù†Ø´Ø§Ø¡ Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
            document.addEventListener('DOMContentLoaded', function() {
                const codeBg = document.getElementById('codeBackground');
                const languages = ['Python', 'JavaScript', 'HTML', 'CSS', 'Java', 'C++', 'PHP', 'Swift', 'Kotlin'];
                const brackets = ['{', '}', '[', ']', '(', ')', '<', '>'];
                const codeSnippets = [
                    'function hello() {\n  return "Ù…Ø±Ø­Ø¨Ø§";\n}',
                    'for i in range(5):\n    print(i)',
                    'const x = 5;\nconsole.log(x);',
                    '<div class="box">\n  <p>Ù…Ø­ØªÙˆÙ‰</p>\n</div>',
                    'public class Main {\n  public static void main() {}\n}',
                    '#include <iostream>\nusing namespace std;',
                    'let arr = [1, 2, 3];\narr.map(x => x*2);',
                    '@IBOutlet weak var label: UILabel!',
                    'fun main() {\n  println("Hello")\n}'
                ];
                
                // Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ù…Ø§Ø¡ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©
                for (let i = 0; i < 12; i++) {
                    const langElement = document.createElement('div');
                    langElement.className = 'lang-name';
                    langElement.textContent = languages[Math.floor(Math.random() * languages.length)];
                    langElement.style.fontSize = `${Math.random() * 20 + 16}px`;
                    langElement.style.left = `${Math.random() * 90}%`;
                    langElement.style.top = `${Math.random() * 90}%`;
                    langElement.style.transform = `rotate(${Math.random() * 15 - 7.5}deg)`;
                    codeBg.appendChild(langElement);
                }
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù‚ÙˆØ§Ø³
                for (let i = 0; i < 18; i++) {
                    const bracketElement = document.createElement('div');
                    bracketElement.className = 'bracket';
                    bracketElement.textContent = brackets[Math.floor(Math.random() * brackets.length)];
                    bracketElement.style.fontSize = `${Math.random() * 80 + 40}px`;
                    bracketElement.style.left = `${Math.random() * 90}%`;
                    bracketElement.style.top = `${Math.random() * 90}%`;
                    bracketElement.style.transform = `rotate(${Math.random() * 360}deg)`;
                    codeBg.appendChild(bracketElement);
                }
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
                for (let i = 0; i < 15; i++) {
                    const codeElement = document.createElement('div');
                    codeElement.className = 'code-snippet';
                    codeElement.textContent = codeSnippets[Math.floor(Math.random() * codeSnippets.length)];
                    codeElement.style.fontSize = `${Math.random() * 12 + 10}px`;
                    codeElement.style.left = `${Math.random() * 85}%`;
                    codeElement.style.top = `${Math.random() * 85}%`;
                    codeElement.style.transform = `rotate(${Math.random() * 10 - 5}deg)`;
                    codeElement.style.opacity = `${Math.random() * 0.4 + 0.6}`;
                    codeBg.appendChild(codeElement);
                }
            });

            // ØªÙ‡ÙŠØ¦Ø© Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyBSGd2kr71zV0UG2i5IwlMs9UmJB0anH8k",
                authDomain: "code-kids-800d9.firebaseapp.com",
                databaseURL: "https://code-kids-800d9-default-rtdb.firebaseio.com",
                projectId: "code-kids-800d9",
                storageBucket: "code-kids-800d9.firebasestorage.app",
                messagingSenderId: "616970170049",
                appId: "1:616970170049:web:b5b756e5ec642627c4ae40"
            };

            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();

            // Ø¹Ù†Ø§ØµØ± DOM
            const togglePassword = document.querySelector('#togglePassword');
            const password = document.querySelector('#password');
            const icon = togglePassword.querySelector('i');
            const form = document.getElementById('signup-form');
            const verificationSection = document.getElementById('verification-section');
            const resendButton = document.getElementById('resend-verification');
            const verifiedMessage = document.getElementById('email-verified-message');

            // Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
            togglePassword.addEventListener('click', function() {
                const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                password.setAttribute('type', type);
                icon.classList.toggle('fa-eye');
                icon.classList.toggle('fa-eye-slash');
            });

            // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚
            resendButton.addEventListener('click', () => {
                if (auth.currentUser) {
                    auth.currentUser.sendEmailVerification()
                        .then(() => alert('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚'))
                        .catch(error => alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message));
                }
            });




            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
// âœ… Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ - ØªÙØ¹ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ
form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('name').value.trim();
    const age = document.getElementById('age').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    if (!name) {
        alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ØµØ­ÙŠØ­");
        return;
    }

    // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    if (!isValidEmail(email)) {
        alert('ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
        return;
    }

    try {
        // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const user = userCredential.user;

        // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù…
        await user.updateProfile({ displayName: name });

        // 3. âœ… ØªÙØ¹ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙˆØ±ÙŠ (Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯)
        console.log("ğŸ¯ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹");

        // 4. Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙˆØ±ÙŠ
        await db.collection('users').doc(user.uid).set({
            userId: user.uid,
            name: name,
            age: age,
            email: email,
            emailVerified: true, // âœ… ØªÙØ¹ÙŠÙ„ ÙÙˆØ±ÙŠ
            stats: [],
            profileImage: 'avatar/default.png',
            points: 0,
            level: 1,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        // 5. Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
        form.style.display = 'none';
        verificationSection.style.display = 'block';
        verifiedMessage.style.display = 'block';
        verifiedMessage.innerHTML = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙˆØªÙØ¹ÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!<br>Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†Ù...';

        // 6. Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        setTimeout(() => {
            window.location.href = 'f1.html';
        }, 3000);

    } catch (error) {
        console.error('âŒ Error:', error);
        
        if (error.code === 'auth/email-already-in-use') {
            alert('Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„');
        } else if (error.code === 'auth/weak-password') {
            alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ©ØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
        } else if (error.code === 'auth/invalid-email') {
            alert('ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
        } else {
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message);
        }
        
        if (auth.currentUser) {
            await auth.currentUser.delete();
        }
    }
});






// Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„ØªØ­Ù‚Ù‚
function startVerificationCheck() {
    const checkInterval = setInterval(() => {
        const user = auth.currentUser;
        if (user) {
            user.reload().then(() => {
                if (user.emailVerified) {
                    clearInterval(checkInterval);
                    verifiedMessage.style.display = 'block';
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù‚Ù„ ÙÙŠ Firestore
                    db.collection('users').doc(user.uid).update({
                        emailVerified: true,
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    setTimeout(() => {
                        window.location.href = 'f1.html';
                    }, 3000);
                }
            }).catch(error => {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
            });
        } else {
            clearInterval(checkInterval);
        }
    }, 2000);
}

// Ø¯Ø§Ù„Ø© Ù„Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚
function clearPreviousUserData() {
    const keysToRemove = [
        'quizScore_page1', 'quizScore_page2', 'quizScore_page3',
        'answeredQuestions_page1', 'answeredQuestions_page2', 'answeredQuestions_page3',
        'grandTotalScore', 'lastLevel'
    ];
    
    keysToRemove.forEach(key => localStorage.removeItem(key));
    console.log('ØªÙ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù…Ù† localStorage');
}

let verificationCheck;

auth.onAuthStateChanged(user => {
    if (user) {
        // âœ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙÙˆØ±Ø§Ù‹
        clearPreviousUserData();
            if (!user.emailVerified) {
            verificationCheck = setInterval(checkVerification, 1000);
        }             
   
    } else {
        // âœ… Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ØŒ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙŠØ¶Ø§Ù‹
        clearPreviousUserData();
    }
});

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
function checkVerification() {
    const user = auth.currentUser;
    if (user) {
        user.reload().then(() => {
            if (user.emailVerified) {
                verifiedMessage.style.display = 'block';
                
                // âœ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡
                clearPreviousUserData();
                
                if (verificationCheck) {
                    clearInterval(verificationCheck);
                    verificationCheck = null;
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙŠ Firestore
                db.collection('users').doc(user.uid).update({
                    emailVerified: true,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                setTimeout(() => {
                    window.location.href = 'f1.html';
                }, 5000); 
            }
        }).catch(error => {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
        });                        
    }
}
        </script>
    </body>
</html>
