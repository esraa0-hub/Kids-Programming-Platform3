<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <title>ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® - ŸÉŸàÿØ ŸÉŸäÿØÿ≤</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@700;900&family=Source+Code+Pro:wght@300;400&display=swap" rel="stylesheet">
        <style>
            :root {
                --primary: #4361ee;
                --primary-light: #4cc9f0;
                --accent: #f72585;
                --yellow: #ffd166;
                --white: #ffffff;
                --dark: #2b2d42;
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-15px); }
            }
            
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }
            
            body {
                font-family: 'Tajawal', sans-serif;
                margin: 0;
                padding: 0;
                background: linear-gradient(135deg, #83d9f3, #4cc9f0);
                color: var(--dark);
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                position: relative;
                overflow: hidden;
            }
            
            .code-bg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
                z-index: -1;
                opacity: 0.25;
            }
            
            .code-snippet {
                position: absolute;
                font-family: 'Source Code Pro', monospace;
                color: rgba(255,255,255,0.8);
                white-space: pre;
                pointer-events: none;
                font-weight: 300;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            }
            
            .bracket {
                position: absolute;
                font-family: 'Source Code Pro', monospace;
                color: rgba(255,255,255,0.9);
                font-size: 3rem;
                pointer-events: none;
                font-weight: 400;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            }
            
            .lang-name {
                position: absolute;
                font-family: 'Source Code Pro', monospace;
                color: rgba(255,255,255,0.7);
                font-size: 1.5rem;
                pointer-events: none;
                font-weight: 400;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            }
            
            .floating-icon {
                position: absolute;
                font-size: 2rem;
                opacity: 0.7;
                animation: float 6s infinite ease-in-out;
                z-index: -1;
            }
            
            #signup-page {
                width: 100%;
                max-width: 500px;
                padding: 40px;
                background: rgba(255, 255, 255, 0.9);
                border-radius: 20px;
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
                text-align: center;
                position: relative;
                z-index: 1;
                margin: 20px;
            }
            
            #signup-page h3 {
                font-size: 2rem;
                color: var(--primary);
                margin-bottom: 30px;
                font-weight: 900;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            }
            
            #signup-form {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            
            .input-group {
                position: relative;
                width: 90%;
            }
            
            #signup-form input {
                width: 100%;
                padding: 15px 20px;
                border: 2px solid #e0e0e0;
                border-radius: 50px;
                font-size: 1rem;
                font-family: 'Tajawal', sans-serif;
                transition: all 0.3s;
                background: rgba(255, 255, 255, 0.8);
            }
            
            #signup-form input:focus {
                border-color: var(--primary);
                outline: none;
                box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            }
            
            #togglePassword {
                position: absolute;
                left: 15px;
                top: 0%;
                transform: translateY(-15%);
                background: none;
                border: none;
                cursor: pointer;
                color: var(--primary);
                font-size: 1.2rem;
            }
        
            
            #signup-form button {
                background: var(--primary);
                color: white;
                border: none;
                padding: 15px;
                border-radius: 50px;
                font-size: 1.1rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s;
                margin-top: 10px;
                font-family: 'Tajawal', sans-serif;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            }
            
            #signup-form button:hover {
                background: #3a56d4;
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            }
            
            .verification-section {
                display: none;
                margin-top: 20px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.8);
                border-radius: 15px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            }
            
            .verification-section p {
                color: var(--dark);
                margin-bottom: 15px;
            }
            
            #resend-verification {
                background: #4cc9f0;
                background: var(--accent);
                width: 100%;
                height : 30px;

            }
            
            #resend-verification:hover {
                background: #4CAF50;
            }
            
            #email-verified-message {
                color: #4CAF50;
                font-weight: bold;
                display: none;
                animation: fadeIn 0.5s;
                margin-top: 15px;
            }
            
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @media (max-width: 768px) {
                #signup-page {
                    padding: 30px 20px;
                    margin: 15px;
                }
                
                #signup-page h3 {
                    font-size: 1.5rem;
                }
                
                #signup-form input {
                    padding: 12px 15px;
                }
            }
        </style>
    </head>
    <body>
        <div class="code-bg" id="codeBackground"></div>
        
        <!-- ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿπÿßÿ¶ŸÖÿ© -->
        <div class="floating-icon" style="top:20%;left:10%;">üíª</div>
        <div class="floating-icon" style="top:60%;left:15%;">üëæ</div>
        <div class="floating-icon" style="top:30%;right:10%;">üß©</div>
        <div class="floating-icon" style="top:70%;right:15%;">üéÆ</div>
        
        <div id="signup-page">
            <h3>ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ</h3>
            <form id="signup-form">
                <div class="input-group">
                    <input type="text" id="name" placeholder="ÿßŸÑÿßÿ≥ŸÖ" required>
                </div>
                
                <div class="input-group">
                    <input type="number" id="age" placeholder="ÿßŸÑÿπŸÖÿ±" min="1" required>
                </div>
                
                <div class="input-group">
                    <input type="email" id="email" placeholder="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä" required>
                </div>
                
                <div class="input-group">
                    <input type="password" id="password" placeholder="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±" required>
                    <button type="button" id="togglePassword">
                        <i class="far fa-eye"></i>
                    </button>
                </div>
                
                <button type="submit">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</button>
            </form>
            
            <!-- ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ -->
            <div class="verification-section" id="verification-section">
              
                <button id="resend-verification"> </button>
                <p id="email-verified-message">‚úì ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ®ŸÜÿ¨ÿßÿ≠!</p>
            </div>
        </div>

        <script>
            // ÿ•ŸÜÿ¥ÿßÿ° ÿÆŸÑŸÅŸäÿ© ÿßŸÑÿ£ŸÉŸàÿßÿØ ÿßŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿ©
            document.addEventListener('DOMContentLoaded', function() {
                const codeBg = document.getElementById('codeBackground');
                const languages = ['Python', 'JavaScript', 'HTML', 'CSS', 'Java', 'C++', 'PHP', 'Swift', 'Kotlin'];
                const brackets = ['{', '}', '[', ']', '(', ')', '<', '>'];
                const codeSnippets = [
                    'function hello() {\n  return "ŸÖÿ±ÿ≠ÿ®ÿß";\n}',
                    'for i in range(5):\n    print(i)',
                    'const x = 5;\nconsole.log(x);',
                    '<div class="box">\n  <p>ŸÖÿ≠ÿ™ŸàŸâ</p>\n</div>',
                    'public class Main {\n  public static void main() {}\n}',
                    '#include <iostream>\nusing namespace std;',
                    'let arr = [1, 2, 3];\narr.map(x => x*2);',
                    '@IBOutlet weak var label: UILabel!',
                    'fun main() {\n  println("Hello")\n}'
                ];
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ≥ŸÖÿßÿ° ŸÑÿ∫ÿßÿ™ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ©
                for (let i = 0; i < 12; i++) {
                    const langElement = document.createElement('div');
                    langElement.className = 'lang-name';
                    langElement.textContent = languages[Math.floor(Math.random() * languages.length)];
                    langElement.style.fontSize = `${Math.random() * 20 + 16}px`;
                    langElement.style.left = `${Math.random() * 90}%`;
                    langElement.style.top = `${Math.random() * 90}%`;
                    langElement.style.transform = `rotate(${Math.random() * 15 - 7.5}deg)`;
                    codeBg.appendChild(langElement);
                }
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ£ŸÇŸàÿßÿ≥
                for (let i = 0; i < 18; i++) {
                    const bracketElement = document.createElement('div');
                    bracketElement.className = 'bracket';
                    bracketElement.textContent = brackets[Math.floor(Math.random() * brackets.length)];
                    bracketElement.style.fontSize = `${Math.random() * 80 + 40}px`;
                    bracketElement.style.left = `${Math.random() * 90}%`;
                    bracketElement.style.top = `${Math.random() * 90}%`;
                    bracketElement.style.transform = `rotate(${Math.random() * 360}deg)`;
                    codeBg.appendChild(bracketElement);
                }
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ£ŸÉŸàÿßÿØ ÿßŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿ©
                for (let i = 0; i < 15; i++) {
                    const codeElement = document.createElement('div');
                    codeElement.className = 'code-snippet';
                    codeElement.textContent = codeSnippets[Math.floor(Math.random() * codeSnippets.length)];
                    codeElement.style.fontSize = `${Math.random() * 12 + 10}px`;
                    codeElement.style.left = `${Math.random() * 85}%`;
                    codeElement.style.top = `${Math.random() * 85}%`;
                    codeElement.style.transform = `rotate(${Math.random() * 10 - 5}deg)`;
                    codeElement.style.opacity = `${Math.random() * 0.4 + 0.6}`;
                    codeBg.appendChild(codeElement);
                }
            });

            // ÿ™ŸáŸäÿ¶ÿ© Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyBSGd2kr71zV0UG2i5IwlMs9UmJB0anH8k",
                authDomain: "code-kids-800d9.firebaseapp.com",
                databaseURL: "https://code-kids-800d9-default-rtdb.firebaseio.com",
                projectId: "code-kids-800d9",
                storageBucket: "code-kids-800d9.firebasestorage.app",
                messagingSenderId: "616970170049",
                appId: "1:616970170049:web:b5b756e5ec642627c4ae40"
            };

            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();

            // ÿπŸÜÿßÿµÿ± DOM
            const togglePassword = document.querySelector('#togglePassword');
            const password = document.querySelector('#password');
            const icon = togglePassword.querySelector('i');
            const form = document.getElementById('signup-form');
            const verificationSection = document.getElementById('verification-section');
            const resendButton = document.getElementById('resend-verification');
            const verifiedMessage = document.getElementById('email-verified-message');

            // ÿπÿ±ÿ∂/ÿ•ÿÆŸÅÿßÿ° ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
            togglePassword.addEventListener('click', function() {
                const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                password.setAttribute('type', type);
                icon.classList.toggle('fa-eye');
                icon.classList.toggle('fa-eye-slash');
            });

            // ÿ•ÿπÿßÿØÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ™ÿ≠ŸÇŸÇ
            resendButton.addEventListener('click', () => {
                if (auth.currentUser) {
                    auth.currentUser.sendEmailVerification()
                        .then(() => alert('ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ™ÿ≠ŸÇŸÇ'))
                        .catch(error => alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ' + error.message));
                }
            });




            // ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ¨ÿØŸäÿØ
// ‚úÖ ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ¨ÿØŸäÿØ - ÿ™ŸÅÿπŸäŸÑ ÿ™ŸÑŸÇÿßÿ¶Ÿä
form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('name').value.trim();
    const age = document.getElementById('age').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    if (!name) {
        alert("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖ ÿµÿ≠Ÿäÿ≠");
        return;
    }

    // ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    if (!isValidEmail(email)) {
        alert('ÿµŸäÿ∫ÿ© ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©');
        return;
    }

    try {
        // 1. ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const user = userCredential.user;

        // 2. ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ≥ŸÖ
        await user.updateProfile({ displayName: name });

        // 3. ‚úÖ ÿ™ŸÅÿπŸäŸÑ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÅŸàÿ±Ÿä (ÿ®ÿØŸàŸÜ ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ÿ±ŸäÿØ)
        console.log("üéØ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã");

        // 4. ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿπ ÿßŸÑÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÅŸàÿ±Ÿä
        await db.collection('users').doc(user.uid).set({
            userId: user.uid,
            name: name,
            age: age,
            email: email,
            emailVerified: true, // ‚úÖ ÿ™ŸÅÿπŸäŸÑ ŸÅŸàÿ±Ÿä
            stats: [],
            profileImage: 'avatar/default.png',
            points: 0,
            level: 1,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        // 5. ÿ•ÿ∏Ÿáÿßÿ± ÿ±ÿ≥ÿßŸÑÿ© ŸÜÿ¨ÿßÿ≠
        form.style.display = 'none';
        verificationSection.style.display = 'block';
        verifiedMessage.style.display = 'block';
        verifiedMessage.innerHTML = '‚úÖ ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ Ÿàÿ™ŸÅÿπŸäŸÑŸá ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!<br>ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑŸÉ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ÿÆŸÑÿßŸÑ 3 ÿ´ŸàÿßŸÜŸç...';

        // 6. ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑŸÅŸàÿ±Ÿä ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
        setTimeout(() => {
            window.location.href = 'f1.html';
        }, 3000);

    } catch (error) {
        console.error('‚ùå Error:', error);
        
        if (error.code === 'auth/email-already-in-use') {
            alert('Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ÿßŸÑŸÅÿπŸÑ');
        } else if (error.code === 'auth/weak-password') {
            alert('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ©ÿå Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ');
        } else if (error.code === 'auth/invalid-email') {
            alert('ÿµŸäÿ∫ÿ© ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©');
        } else {
            alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ' + error.message);
        }
        
        if (auth.currentUser) {
            await auth.currentUser.delete();
        }
    }
});






// ÿØÿßŸÑÿ© ÿ®ÿØÿ° ŸÅÿ≠ÿµ ÿßŸÑÿ™ÿ≠ŸÇŸÇ
function startVerificationCheck() {
    const checkInterval = setInterval(() => {
        const user = auth.currentUser;
        if (user) {
            user.reload().then(() => {
                if (user.emailVerified) {
                    clearInterval(checkInterval);
                    verifiedMessage.style.display = 'block';
                    
                    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ŸÇŸÑ ŸÅŸä Firestore
                    db.collection('users').doc(user.uid).update({
                        emailVerified: true,
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    setTimeout(() => {
                        window.location.href = 'f1.html';
                    }, 3000);
                }
            }).catch(error => {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:', error);
            });
        } else {
            clearInterval(checkInterval);
        }
    }, 2000);
}

// ÿØÿßŸÑÿ© ŸÑŸÖÿ≥ÿ≠ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ≥ÿßÿ®ŸÇ
function clearPreviousUserData() {
    const keysToRemove = [
        'quizScore_page1', 'quizScore_page2', 'quizScore_page3',
        'answeredQuestions_page1', 'answeredQuestions_page2', 'answeredQuestions_page3',
        'grandTotalScore', 'lastLevel'
    ];
    
    keysToRemove.forEach(key => localStorage.removeItem(key));
    console.log('ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ≥ÿßÿ®ŸÇ ŸÖŸÜ localStorage');
}

let verificationCheck;

auth.onAuthStateChanged(user => {
    if (user) {
        // ‚úÖ ŸÖÿ≥ÿ≠ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ≥ÿßÿ®ŸÇ ŸÅŸàÿ±ÿßŸã
        clearPreviousUserData();
            if (!user.emailVerified) {
            verificationCheck = setInterval(checkVerification, 1000);
        }             
   
    } else {
        // ‚úÖ ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸáŸÜÿßŸÉ ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ¨ŸÑÿå ŸÖÿ≥ÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ£Ÿäÿ∂ÿßŸã
        clearPreviousUserData();
    }
});

// ÿØÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä
function checkVerification() {
    const user = auth.currentUser;
    if (user) {
        user.reload().then(() => {
            if (user.emailVerified) {
                verifiedMessage.style.display = 'block';
                
                // ‚úÖ ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÇÿ®ŸÑ ÿßŸÑÿ™Ÿàÿ¨ŸäŸá
                clearPreviousUserData();
                
                if (verificationCheck) {
                    clearInterval(verificationCheck);
                    verificationCheck = null;
                }
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÅŸä Firestore
                db.collection('users').doc(user.uid).update({
                    emailVerified: true,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                setTimeout(() => {
                    window.location.href = 'f1.html';
                }, 5000); 
            }
        }).catch(error => {
            console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:', error);
        });                        
    }
}
        </script>
    </body>
</html>
